(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{2981:function(e,s,t){Promise.resolve().then(t.bind(t,5454))},5454:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return f}});var a=t(7437),n=t(1713),i=t(5135),r=t(7168),l=t(7692),c=t(3781),o=t(8906),d=t(1239),m=t(6221),x=t(7648),u=t(7766),h=t(5526);async function p(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{skipAuth:t=!1,...a}=s,n={"Content-Type":"application/json",...s.headers};if(!t){let e=await (0,h.hP)();e&&(n.Authorization="Bearer ".concat(e))}let i="".concat("https://ai-saas-1-production.up.railway.app").concat(e),r=await fetch(i,{...a,headers:n,mode:"cors"});if(!r.ok){let e=await r.json().catch(()=>({detail:"An error occurred"}));throw new g(r.status,e.detail||"Request failed",e)}let l=r.headers.get("content-type");return l&&l.includes("application/json")?r.json():{}}class g extends Error{constructor(e,s,t){super(s),this.name="APIError",this.status=e,this.data=t}}let j=(e,s)=>p(e,{...s,method:"GET"}),N=()=>j("/repositories");function f(){let{user:e,isLoading:s,isAuthenticated:t,signIn:h,signOut:p}=(0,u.a)(),{data:g,isLoading:j,error:f,refetch:b}=(0,n.a)({queryKey:["repositories"],queryFn:N,enabled:t}),y=(null==g?void 0:g.repositories)||[];return s?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):t?f?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Error Loading Dashboard"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:f instanceof Error?f.message:"An error occurred while loading your data."}),(0,a.jsx)("button",{onClick:()=>b(),className:"btn btn-primary",children:"Try Again"})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white shadow",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"AutoDevOps AI"}),(null==e?void 0:e.email)&&(0,a.jsx)("span",{className:"text-sm text-gray-500",children:e.email})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("button",{onClick:()=>b(),className:"btn btn-secondary inline-flex items-center gap-2",children:[(0,a.jsx)(r.Z,{className:"w-4 h-4"}),"Refresh"]}),(0,a.jsxs)("button",{onClick:()=>h(),className:"btn btn-primary inline-flex items-center gap-2",children:[(0,a.jsx)(i.Z,{className:"w-5 h-5"}),"Connect Repository"]}),(0,a.jsxs)("button",{onClick:p,className:"btn btn-secondary inline-flex items-center gap-2",title:"Sign out",children:[(0,a.jsx)(l.Z,{className:"w-4 h-4"}),"Sign Out"]})]})]})})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,a.jsx)("div",{className:"card",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-3 rounded-full bg-primary-100 text-primary-600",children:(0,a.jsx)(c.Z,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Repositories"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:y.length})]})]})}),(0,a.jsx)("div",{className:"card",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-3 rounded-full bg-green-100 text-green-600",children:(0,a.jsx)(o.Z,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Avg Security"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:"--"})]})]})}),(0,a.jsx)("div",{className:"card",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-3 rounded-full bg-yellow-100 text-yellow-600",children:(0,a.jsx)(d.Z,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Avg Performance"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:"--"})]})]})}),(0,a.jsx)("div",{className:"card",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-3 rounded-full bg-purple-100 text-purple-600",children:(0,a.jsx)(m.Z,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Analyses"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:"--"})]})]})})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Connected Repositories"}),s||j?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):0===y.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(i.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No repositories connected"}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"Connect your GitHub repositories to start analyzing and improving your code."}),(0,a.jsxs)("button",{onClick:()=>h(),className:"btn btn-primary inline-flex items-center gap-2",children:[(0,a.jsx)(i.Z,{className:"w-5 h-5"}),"Connect GitHub"]})]}):(0,a.jsx)("div",{className:"space-y-4",children:y.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"p-2 bg-gray-100 rounded-lg",children:(0,a.jsx)(c.Z,{className:"w-5 h-5 text-gray-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:(0,a.jsx)(x.default,{href:"/repositories/".concat(e.id),className:"hover:text-primary-600",children:e.full_name})}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.description||"No description"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[e.language&&(0,a.jsx)("span",{className:"badge badge-info",children:e.language}),e.is_private?(0,a.jsx)("span",{className:"badge badge-warning",children:"Private"}):(0,a.jsx)("span",{className:"badge badge-success",children:"Public"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"text-right text-sm text-gray-500",children:e.last_analyzed_at?(0,a.jsxs)("span",{children:["Last analyzed: ",new Date(e.last_analyzed_at).toLocaleDateString()]}):(0,a.jsx)("span",{children:"Not yet analyzed"})}),(0,a.jsx)(x.default,{href:"/repositories/".concat(e.id),className:"btn btn-secondary text-sm",children:"View"})]})]},e.id))})]})]})]}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"text-center max-w-md mx-auto p-8",children:[(0,a.jsx)(i.Z,{className:"w-16 h-16 text-gray-400 mx-auto mb-6"}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Welcome to AutoDevOps AI"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Connect your GitHub account to start analyzing and improving your repositories."}),(0,a.jsxs)("button",{onClick:()=>h(),className:"btn btn-primary inline-flex items-center gap-2 px-6 py-3",children:[(0,a.jsx)(i.Z,{className:"w-5 h-5"}),"Connect with GitHub"]})]})})}},7766:function(e,s,t){"use strict";t.d(s,{H:function(){return l},a:function(){return c}});var a=t(7437),n=t(2265),i=t(5526);let r=(0,n.createContext)(void 0);function l(e){let{children:s}=e,[t,l]=(0,n.useState)(null),[c,o]=(0,n.useState)(null),[d,m]=(0,n.useState)(!0);(0,n.useEffect)(()=>{if(i.OQ){i.OQ.auth.getSession().then(e=>{var s;let{data:{session:t}}=e;o(t),l(null!==(s=null==t?void 0:t.user)&&void 0!==s?s:null),m(!1)});let{data:{subscription:e}}=i.OQ.auth.onAuthStateChange((e,s)=>{var t;o(s),l(null!==(t=null==s?void 0:s.user)&&void 0!==t?t:null),m(!1)});return()=>{e.unsubscribe()}}m(!1)},[]);let x=async e=>{await (0,i.z2)(e)},u=async()=>{await (0,i.w7)(),o(null),l(null)},h=async()=>{if(!i.OQ)return null;let{data:{session:e}}=await i.OQ.auth.getSession();return(null==e?void 0:e.access_token)||null};return(0,a.jsx)(r.Provider,{value:{user:t,session:c,isLoading:d,isAuthenticated:!!t,signIn:x,signOut:u,getAccessToken:h},children:s})}function c(){let e=(0,n.useContext)(r);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},5526:function(e,s,t){"use strict";t.d(s,{OQ:function(){return l},hP:function(){return m},w7:function(){return o},z2:function(){return c}});var a=t(3053),n=t(257);let i="https://cgcwxniefkobrxgfwxxh.supabase.co",r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNnY3d4bmllZmtvYnJ4Z2Z3eHhoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzExMzc1MDQsImV4cCI6MjA4NjcxMzUwNH0.vnrBIjQnPGRAOpjDu6uWNtR4g2rLOJcbkRsFSZn2oc8",l=null;async function c(e){if(!l)throw Error("Supabase client not initialized");let{data:s,error:t}=await l.auth.signInWithOAuth({provider:"github",options:{redirectTo:e||"".concat(n.env.NEXT_PUBLIC_FRONTEND_URL,"/dashboard"),scopes:"repo user:email"}});if(t)throw console.error("GitHub sign-in error:",t),t;return s}async function o(){if(!l)throw Error("Supabase client not initialized");let{error:e}=await l.auth.signOut();if(e)throw console.error("Sign-out error:",e),e}async function d(){if(!l)return null;let{data:{session:e},error:s}=await l.auth.getSession();return s?(console.error("Get session error:",s),null):e}async function m(){let e=await d();return(null==e?void 0:e.access_token)||null}i&&r?l=(0,a.eI)(i,r,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}}):console.warn("Supabase environment variables are not configured. Authentication will not work.")}},function(e){e.O(0,[309,749,971,117,744],function(){return e(e.s=2981)}),_N_E=e.O()}]);